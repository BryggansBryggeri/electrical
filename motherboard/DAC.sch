EESchema Schematic File Version 4
EELAYER 30 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 3 25
Title ""
Date ""
Rev ""
Comp ""
Comment1 ""
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
$Comp
L bryggan:R R301
U 1 1 5E79A003
P 3675 3800
F 0 "R301" H 3745 3846 50  0000 L CNN
F 1 "10k" H 3745 3755 50  0000 L CNN
F 2 "" V 3605 3800 50  0001 C CNN
F 3 "" H 3675 3800 50  0001 C CNN
	1    3675 3800
	1    0    0    -1  
$EndComp
$Comp
L bryggan:GND #PWR0301
U 1 1 5E79BAA0
P 3675 3950
F 0 "#PWR0301" H 3675 3700 50  0001 C CNN
F 1 "GND" H 3680 3777 50  0000 C CNN
F 2 "" H 3675 3950 50  0001 C CNN
F 3 "" H 3675 3950 50  0001 C CNN
	1    3675 3950
	1    0    0    -1  
$EndComp
$Comp
L bryggan:GND #PWR0307
U 1 1 5E84290C
P 5950 3100
F 0 "#PWR0307" H 5950 2850 50  0001 C CNN
F 1 "GND" H 5955 2927 50  0000 C CNN
F 2 "" H 5950 3100 50  0001 C CNN
F 3 "" H 5950 3100 50  0001 C CNN
	1    5950 3100
	1    0    0    -1  
$EndComp
$Comp
L bryggan:GND #PWR0305
U 1 1 5E84227A
P 5250 3100
F 0 "#PWR0305" H 5250 2850 50  0001 C CNN
F 1 "GND" H 5255 2927 50  0000 C CNN
F 2 "" H 5250 3100 50  0001 C CNN
F 3 "" H 5250 3100 50  0001 C CNN
	1    5250 3100
	1    0    0    -1  
$EndComp
$Comp
L bryggan:GND #PWR0303
U 1 1 5E841FB2
P 4650 3950
F 0 "#PWR0303" H 4650 3700 50  0001 C CNN
F 1 "GND" H 4655 3777 50  0000 C CNN
F 2 "" H 4650 3950 50  0001 C CNN
F 3 "" H 4650 3950 50  0001 C CNN
	1    4650 3950
	1    0    0    -1  
$EndComp
Wire Wire Line
	6100 3750 5250 3750
Wire Wire Line
	5250 3650 6100 3650
Wire Wire Line
	6100 3550 5250 3550
Wire Wire Line
	5250 3450 6100 3450
Text HLabel 7050 3750 2    50   Output ~ 0
D_out_10V
Text HLabel 7050 3650 2    50   Output ~ 0
C_out_10V
Text HLabel 7050 3550 2    50   Output ~ 0
B_out_10V
Text HLabel 7050 3450 2    50   Output ~ 0
A_out_10V
$Sheet
S 6100 3350 950  650 
U 5E79BD59
F0 "DAC_amp" 50
F1 "DAC_amp.sch" 50
F2 "A_in" I L 6100 3450 50 
F3 "A_out" O R 7050 3450 50 
F4 "B_in" I L 6100 3550 50 
F5 "B_out" O R 7050 3550 50 
F6 "C_in" I L 6100 3650 50 
F7 "C_out" O R 7050 3650 50 
F8 "D_in" I L 6100 3750 50 
F9 "D_out" O R 7050 3750 50 
$EndSheet
NoConn ~ 4050 3750
Text HLabel 4050 3450 0    50   Input ~ 0
scl
Text HLabel 4050 3550 0    50   BiDi ~ 0
sda
Connection ~ 5250 2800
Wire Wire Line
	4650 2800 4650 3250
Wire Wire Line
	5250 2800 4650 2800
Wire Wire Line
	5950 2800 5250 2800
Wire Wire Line
	6750 2650 6750 2800
$Comp
L Device:C C301
U 1 1 5E790B22
P 5250 2950
F 0 "C301" H 5365 2996 50  0000 L CNN
F 1 "0.1u" H 5365 2905 50  0000 L CNN
F 2 "" H 5288 2800 50  0001 C CNN
F 3 "~" H 5250 2950 50  0001 C CNN
	1    5250 2950
	1    0    0    -1  
$EndComp
$Comp
L Device:CP C303
U 1 1 5E7905B5
P 5950 2950
F 0 "C303" H 6068 2996 50  0000 L CNN
F 1 "10u" H 6068 2905 50  0000 L CNN
F 2 "" H 5988 2800 50  0001 C CNN
F 3 "~" H 5950 2950 50  0001 C CNN
	1    5950 2950
	1    0    0    -1  
$EndComp
$Comp
L Analog_DAC:MCP4728 U?
U 1 1 5E78FBC7
P 4650 3550
AR Path="/5E78FBC7" Ref="U?"  Part="1" 
AR Path="/5E7855D6/5E78FBC7" Ref="U301"  Part="1" 
F 0 "U301" H 4650 4031 50  0000 C CNN
F 1 "MCP4728" H 4650 3940 50  0000 C CNN
F 2 "Package_SO:MSOP-10_3x3mm_P0.5mm" H 4650 2950 50  0001 C CNN
F 3 "http://ww1.microchip.com/downloads/en/DeviceDoc/22187E.pdf" H 4650 3800 50  0001 C CNN
	1    4650 3550
	1    0    0    -1  
$EndComp
$Comp
L bryggan:R R302
U 1 1 5E7F29AE
P 3675 5500
F 0 "R302" H 3745 5546 50  0000 L CNN
F 1 "10k" H 3745 5455 50  0000 L CNN
F 2 "" V 3605 5500 50  0001 C CNN
F 3 "" H 3675 5500 50  0001 C CNN
	1    3675 5500
	1    0    0    -1  
$EndComp
$Comp
L bryggan:GND #PWR0302
U 1 1 5E7F29B4
P 3675 5650
F 0 "#PWR0302" H 3675 5400 50  0001 C CNN
F 1 "GND" H 3680 5477 50  0000 C CNN
F 2 "" H 3675 5650 50  0001 C CNN
F 3 "" H 3675 5650 50  0001 C CNN
	1    3675 5650
	1    0    0    -1  
$EndComp
$Comp
L bryggan:GND #PWR0308
U 1 1 5E7F29C0
P 5950 4800
F 0 "#PWR0308" H 5950 4550 50  0001 C CNN
F 1 "GND" H 5955 4627 50  0000 C CNN
F 2 "" H 5950 4800 50  0001 C CNN
F 3 "" H 5950 4800 50  0001 C CNN
	1    5950 4800
	1    0    0    -1  
$EndComp
$Comp
L bryggan:GND #PWR0306
U 1 1 5E7F29C6
P 5250 4800
F 0 "#PWR0306" H 5250 4550 50  0001 C CNN
F 1 "GND" H 5255 4627 50  0000 C CNN
F 2 "" H 5250 4800 50  0001 C CNN
F 3 "" H 5250 4800 50  0001 C CNN
	1    5250 4800
	1    0    0    -1  
$EndComp
$Comp
L bryggan:GND #PWR0304
U 1 1 5E7F29CC
P 4650 5650
F 0 "#PWR0304" H 4650 5400 50  0001 C CNN
F 1 "GND" H 4655 5477 50  0000 C CNN
F 2 "" H 4650 5650 50  0001 C CNN
F 3 "" H 4650 5650 50  0001 C CNN
	1    4650 5650
	1    0    0    -1  
$EndComp
Wire Wire Line
	6100 5450 5250 5450
Wire Wire Line
	5250 5350 6100 5350
Wire Wire Line
	6100 5250 5250 5250
Text HLabel 7050 5850 2    50   Input ~ 0
D_out_20mA_low
Text HLabel 7050 5650 2    50   Input ~ 0
C_out_20mA_low
Text HLabel 7050 5450 2    50   Input ~ 0
B_out_20mA_low
Text HLabel 7050 5250 2    50   Input ~ 0
A_out_20mA_low
NoConn ~ 4050 5450
Text HLabel 4050 5150 0    50   Input ~ 0
scl
Text HLabel 4050 5250 0    50   BiDi ~ 0
sda
Connection ~ 5250 4500
Wire Wire Line
	4650 4500 4650 4950
Wire Wire Line
	5250 4500 4650 4500
Wire Wire Line
	5950 4500 5250 4500
$Comp
L Device:C C302
U 1 1 5E7F29EE
P 5250 4650
F 0 "C302" H 5365 4696 50  0000 L CNN
F 1 "0.1u" H 5365 4605 50  0000 L CNN
F 2 "" H 5288 4500 50  0001 C CNN
F 3 "~" H 5250 4650 50  0001 C CNN
	1    5250 4650
	1    0    0    -1  
$EndComp
$Comp
L Device:CP C304
U 1 1 5E7F29F4
P 5950 4650
F 0 "C304" H 6068 4696 50  0000 L CNN
F 1 "10u" H 6068 4605 50  0000 L CNN
F 2 "" H 5988 4500 50  0001 C CNN
F 3 "~" H 5950 4650 50  0001 C CNN
	1    5950 4650
	1    0    0    -1  
$EndComp
$Comp
L Analog_DAC:MCP4728 U?
U 1 1 5E7F29FA
P 4650 5250
AR Path="/5E7F29FA" Ref="U?"  Part="1" 
AR Path="/5E7855D6/5E7F29FA" Ref="U302"  Part="1" 
F 0 "U302" H 4650 5731 50  0000 C CNN
F 1 "MCP4728" H 4650 5640 50  0000 C CNN
F 2 "Package_SO:MSOP-10_3x3mm_P0.5mm" H 4650 4650 50  0001 C CNN
F 3 "http://ww1.microchip.com/downloads/en/DeviceDoc/22187E.pdf" H 4650 5500 50  0001 C CNN
	1    4650 5250
	1    0    0    -1  
$EndComp
$Comp
L Device:Jumper JP302
U 1 1 5E7F4096
P 6350 4500
F 0 "JP302" H 6350 4764 50  0000 C CNN
F 1 "Jumper" H 6350 4673 50  0000 C CNN
F 2 "" H 6350 4500 50  0001 C CNN
F 3 "~" H 6350 4500 50  0001 C CNN
	1    6350 4500
	1    0    0    -1  
$EndComp
$Comp
L Device:Jumper JP301
U 1 1 5E7F9517
P 6350 2800
F 0 "JP301" H 6350 3064 50  0000 C CNN
F 1 "Jumper" H 6350 2973 50  0000 C CNN
F 2 "" H 6350 2800 50  0001 C CNN
F 3 "~" H 6350 2800 50  0001 C CNN
	1    6350 2800
	1    0    0    -1  
$EndComp
Wire Wire Line
	6750 4500 6650 4500
Wire Wire Line
	6750 4300 6750 4500
Wire Wire Line
	6050 4500 5950 4500
Connection ~ 5950 4500
Wire Wire Line
	6750 2800 6650 2800
Wire Wire Line
	6050 2800 5950 2800
Connection ~ 5950 2800
Wire Wire Line
	5250 5150 6100 5150
$Sheet
S 6100 5050 950  1050
U 5E806431
F0 "DAC current loop amp" 50
F1 "DAC_cl_amp.sch" 50
F2 "A_in" I L 6100 5150 50 
F3 "B_in" I L 6100 5250 50 
F4 "C_in" I L 6100 5350 50 
F5 "D_in" I L 6100 5450 50 
F6 "D_out_low" I R 7050 5850 50 
F7 "C_out_low" I R 7050 5650 50 
F8 "B_out_low" I R 7050 5450 50 
F9 "A_out_high" O R 7050 5150 50 
F10 "A_out_low" I R 7050 5250 50 
F11 "B_out_high" O R 7050 5350 50 
F12 "C_out_high" O R 7050 5550 50 
F13 "D_out_high" O R 7050 5750 50 
$EndSheet
Text HLabel 7050 5150 2    50   Output ~ 0
A_out_20mA_high
Text HLabel 7050 5350 2    50   Output ~ 0
B_out_20mA_high
Text HLabel 7050 5550 2    50   Output ~ 0
C_out_20mA_high
Text HLabel 7050 5750 2    50   Output ~ 0
D_out_20mA_high
Text Notes 2950 3200 0    50   ~ 0
TODO: Do we need level converter?
Wire Wire Line
	3675 5350 4050 5350
Wire Wire Line
	3675 3650 4050 3650
$Comp
L power:+5V #PWR0122
U 1 1 5EABCDB1
P 6750 2650
F 0 "#PWR0122" H 6750 2500 50  0001 C CNN
F 1 "+5V" H 6765 2823 50  0000 C CNN
F 2 "" H 6750 2650 50  0001 C CNN
F 3 "" H 6750 2650 50  0001 C CNN
	1    6750 2650
	1    0    0    -1  
$EndComp
$Comp
L power:+5V #PWR0123
U 1 1 5EABD28B
P 6750 4300
F 0 "#PWR0123" H 6750 4150 50  0001 C CNN
F 1 "+5V" H 6765 4473 50  0000 C CNN
F 2 "" H 6750 4300 50  0001 C CNN
F 3 "" H 6750 4300 50  0001 C CNN
	1    6750 4300
	1    0    0    -1  
$EndComp
$Comp
L power:PWR_FLAG #FLG0105
U 1 1 5EA9B6FC
P 5250 2800
F 0 "#FLG0105" H 5250 2875 50  0001 C CNN
F 1 "PWR_FLAG" H 5250 2973 50  0000 C CNN
F 2 "" H 5250 2800 50  0001 C CNN
F 3 "~" H 5250 2800 50  0001 C CNN
	1    5250 2800
	1    0    0    -1  
$EndComp
$Comp
L power:PWR_FLAG #FLG0106
U 1 1 5EA9BB4D
P 5250 4500
F 0 "#FLG0106" H 5250 4575 50  0001 C CNN
F 1 "PWR_FLAG" H 5250 4673 50  0000 C CNN
F 2 "" H 5250 4500 50  0001 C CNN
F 3 "~" H 5250 4500 50  0001 C CNN
	1    5250 4500
	1    0    0    -1  
$EndComp
Text Notes 5100 4150 0    50   ~ 0
DAC Vout max 4.096
$EndSCHEMATC
